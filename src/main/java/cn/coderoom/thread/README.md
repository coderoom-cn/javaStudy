
#线程

##线程
每个 Java 程序都使用线程，每个 Java 程序都至少有一个线程 ― 主线程。当一个 Java 程序启动时，JVM 会创建主线程，并在该线程中调用程序的 main() 方法。
JVM 还创建了其它线程，您通常都看不到它们 ― 例如，与垃圾收集、对象终止和其它 JVM 内务处理任务相关的线程。
其它工具也创建线程，如 AWT（抽象窗口工具箱（Abstract Windowing Toolkit））或 Swing UI 工具箱、servlet 容器、应用程序服务器和 RMI（远程方法调用（Remote Method Invocation））。

###线程状态
线程是jvm执行任务的最小单元，理解线程的状态转换是理解后续多线程问题的基础。
在jvm运行中，线程一共有NEW、RUNNABLE、BLOCKED、WAITING、TIMED_WAITING、TERMINATED六种状态，这些状态对应Thread.State枚举类中的状态。
###为什么使用线程
1. 利用多处理器系统，充分利用计算机资源。
    - 用多个线程分解大任务(Excel导入、多线程处理MQ存储数据)。
2. 执行异步或后台处理
3. 当程序有多个独立实体时，简化程序逻辑
4. 在不阻塞整个程序的情况下，执行阻塞 I/O
###风险
多个线程访问同一数据项（如静态字段、可全局访问对象的实例字段或共享集合）时，
需要确保它们协调了对数据的访问，这样它们都可以看到数据的一致视图，而且相互不会干扰另一方的更改。
为了实现这个目的，Java 语言提供了两个关键字：synchronized 和 volatile。

1. 共享数据
2. 线程安全类
3. 可见性
4. 顺序性
5. 原子性

###建议
1. 使用线程池

当使用多个线程时，必须谨慎，遵循在线程之间共享数据的规则，我们将在共享对数据的访问 中讨论这些规则。所有这些规则归结为一条基本原则：不要忘了同步。
##线程创建
    继承Thread
    实现Runnable
    

##中止线程
isInterrupted()和interrupted()

##暂停线程
suspend()——暂停线程
resume()——恢复线程

##线程让步


##设置线程的优先级
Java设置了1-10这10个优先级
线程的优先级是有继承的特性，如果我们在A线程中启动了B线程，则AB具有相同的优先级。
一般我们在main线程中启动线程，就和main线程有一致的优先级。main线程的优先级默认是5。

1、优先级高的线程一般会比优先级低的线程获得更多的CPU资源，但是不代表优先级高的任务一定先于优先级低的任务先执行完。
因为不同优先级的线程中run方法内容可能不一样。
2、优先级高的线程一定会比优先级低的线程执行的快。如果两个线程是一样的run方法，但是优先级不一样，确实优先级高的线程先执行完。

##守护线程
JDK中提供setDaemon的方法来设置一个线程变成守护线程。守护线程的特点是其他非守护线程执行完，守护线程就自动销毁，典型的例子是GC回收器。 

